/*! jQuery Render - v1.2.4 - 2012-08-15
* https://github.com/sideroad/jquery.render
* Copyright (c) 2012 sideroad; Licensed MIT, GPL */
(function(a){var b={},c={},d="",e={},f={},g="en",h=function(a,b){if(!b.length)return a;var c=b.shift();return h(a[c],b)},i=function(a,b,c){var d=b.shift();return b.length?(a[d]||(a[d]={}),i(a[d],b,c)):(a[d]=c,a)},j=function(a){var b=Array.prototype.slice,c=b.call(arguments);return c.shift(),function(){var d=b.call(arguments);return a.apply(this,c.concat(d))}},k=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},l=function(a,b,c,d){var e=d.match(/\[(\d+)\]/);return e&&e[1]&&(d=e[1]),c?a[d]:k(a[d])},m=function(a,b,c,d,e){var f=e=="val"?b:a;return d?f:k(f)},n=function(a){var b=c[g];return a.replace(/\$w\{([^\}]+)\}/g,function(a,c){return k(b[c])})},o=function(b,c){return b=a("<div>"+b+"</div>"),b.find("[data-render]").each(function(){var b=a(this),d=b.data("render").match(/^\$(?:\{|%7B)(.+)(?:\}|%7D)\.(\w+)$/),e=d[2],f=d[1],g=f=="this"||f==""?c:h(c,f.replace(/(\[(\d+)\])/g,".$2").replace(/^\./,"").split(".")),i=0,k,n,p,q,r="";b.removeAttr("data-render"),p=e=="in"?b.html():e=="each"?b[0].outerHTML:e=="bind"?b[0].outerHTML:"";if(e=="bind")q=p,a("<div>"+p+"</div>").find("[data-render]").length&&(q=o(p,g)),r=q.replace(/\$(r?){([^\}]+)}/g,j(l,g)).replace(/\$(r?)(val|key)/g,j(m,f,g));else if(g instanceof Array){k=g.length;for(i=0;i<k;i++)n=g[i],q=p,a("<div>"+p+"</div>").find("[data-render]").length&&(q=o(q,n)),r+=q.replace(/\$(r?){([^\}]+)}/g,j(l,n)).replace(/\$(r?)(val)/g,j(m,null,n))}else if(typeof g=="object")for(f in g)n=g[f],q=p,a("<div>"+p+"</div>").find("[data-render]").length&&(q=o(q,n)),r+=q.replace(/\$(r?){([^\}]+)}/g,j(l,n)).replace(/\$(r?)(val|key)/g,j(m,f,n));e=="in"?b.html(r):e=="each"?b.replaceWith(r):e=="bind"?b.replaceWith(r):""}),b.html()},p=function(a,b){a=o(a,b);var c=a.replace(/\$(r?)\{([^\}]+)\}/g,function(a,c,d){var e=h(b,d.replace(/^this/,"").replace(/(\[(\d+)\])/g,".$2").replace(/^\./,"").split("."));return c?e:k(e)});return e[g]?n(c):c};a.fn.render=function(c,e){var f=!1,g,h;return typeof c=="object"&&!(c instanceof String)&&(f=c),f?(g=f.url+d,h=f.success,this.each(function(){var c=a(this),d=1,i=function(c){return c=a("<div>"+c+"</div>"),c.find("[data-include]").each(function(){var c=a(this);c.html(b[c.data("include")]),c.removeAttr("data-include")}),c.find("[data-include]").length?i(c.html()):c.html()},j=function(k){a.ajax(a.extend(!0,f,{url:k,dataType:"text",success:function(f){var l=a("<div>"+f+"</div>").find("[data-include]");d=d+l.length-1,b[k]=f,d?l.each(function(){j(a(this).data("include"))}):(c.html(p(i(b[g]),e)),h&&h())}}))};b[g]?(c.html(p(i(b[g]),e)),h&&h()):j(g)})):this.each(function(){var b=a(this),d=p(c,e);b.html(d)})},a.word=function(b,d,h,i){var j=h||(navigator.browserLanguage||navigator.language||navigator.userLanguage).substr(0,2);g=j=b[j]?j:b[d]?d:"en";if(c[j])return;f[j]=!0,a.ajax({url:b[j],dataType:"text",success:function(a){var b=a.split(/\n/),d=b.length,g,h=[];c[j]={};for(g=0;g<d;g++)h=b[g].split(/^([^=]+)=(.+)$/),c[j][h[1]]=h[2];f[j]=!1,e[j]=!0,i()}})},a.renderSuffix=function(b){b=b||{};var c=null,e=a.__render__.userAgent;for(c in b)b[c].test(e)&&(d=c)},a.clearSuffix=function(){d=""},a.__render__={seek:h,inception:i,escapeHTML:k,word:c,userAgent:navigator.userAgent}})(jQuery);